## (devops) 가상화 기술
> 애플리케이션 서버, 가상화 기술, 하이퍼바이저와 컨테이너

<br>

## 애플리케이션 서버
### 서버의 종류
- 파일 서버 : 파일 업로드 / 다운로드
- DB 서버 : 데이터 조회 / 입력
- 웹서버 (WEB) : HTTP 요청을 받아 정적인 웹 페이지 제공
- 웹애플리케이션서버 (WAS) : 애플리케이션 코드를 실행하여 동적인 콘텐츠 제공

### 서버 운영 방식
1. 베어메탈 (Baremetal) : 물리적 서버 하드웨어에 직접 운영 체제를 설치하여 사용하는 방식.
2. 하이퍼바이저 (Hypervisor) - 가상화 기술 활용
3. 컨테이너 (Container) - 가상화 기술 활용

<br>

## 가상화 기술
: 물리적인 컴퓨팅 환경에서 논리적인 컴퓨팅 환경을 만들 수 있는 기술
### 가상화 기술을 사용하는 이유
- 하나의 OS 환경에서 여러 개의 프로그램을 실행한다면, 하나의 프로그램이 리소스를 과하게 잡아먹어 다른 프로그램의 영향을 주는 등의 위험이 발생할 수 있다. 
- 가상화 기술을 사용하면, 한 대의 컴퓨터에 여러 대의 논리적인 OS 환경을 만들 수 있고 사용자가 하나의 가상 OS 가 사용할 수 있는 리소스의 최대값을 직접 분배할 수 있다. ( → 다른 환경에 영향을 미치지 않음 )
- 하드웨어 성능이 증가하고 소프트웨어의 요구 사항이 감소하는 추세이며 낮은 성능 여러대를 사용하는 것보다 높은 성능 한 대를 사용하는 것이 가격, 설치 공간, 인력, 서버 운영 등의 측면에서 경제적이다.

<br>

## 하이퍼바이저와 컨테이너
### 하이퍼바이저 (Hypervisor) 
: 컴퓨터에 설치되는 프로그램으로 OS 의 프로그램으로 실행하여 가상화 환경을 관리할 수 있다.
1. 구성 요소
- 호스트 OS : Type 1 의 경우 호스트 OS 없이 직접 하드웨어 위에 설치되어 하드웨어 지원을 직접 관리하고, Type 2 의 경우 기존 운영 체제 위에서 실행되어 하이퍼바이저가 설치된 후 가상환경을 구축한다. ( 물리적인 하드웨어와 직접 연결 )
- 게스트 OS : 호스트 OS 의 리소스를 나눈 논리적인 공간 ( 가상 머신 ) 으로, 각 가상 머신은 독립된 운영 체제를 실행할 수 있고 하나의 서버에서 여러 운영 체제를 동시에 실행 할 수 있다. 
2. 동작 원리
- 가상 머신의 프로세스가 하드웨어 리소스를 사용하려면 해당 요청은 먼저 게스트 OS 의 커널을 통해 진행된다. 
- 게스트 OS 는 하이퍼바이저의 리소스 사용 요청을 대신 전달하는 시스템 콜을 보내 하이퍼바이저가 이를 받아 물리적 하드웨어에 요청을 전달한다.
- 호스트 OS 와 게스트 OS 의 OS 가 서로 다르면 시스템 콜을 처리할 수 없는데, 이러한 호환성 문제를 하이퍼바이저가 처리한다. 하이퍼바이저는 각기 다른 게스트 OS 의 시스템 콜을 통역사 역할을 수행한다.

### 컨테이너 (Container)
- 리눅스 커널의 기능을 활용하여 하이퍼바이저 없이도 커널 자체의 기능만으로 격리된 환경을 만들 수 있다. → 적은 오버헤드
- 각 컨테이너는 자체적인 커널이 없고 호스트 OS 의 커널을 공유하며 파일 시스템, 네트워크 스택, 프로세스 공간 등은 독립적으로 유지된다. → 빠른 부팅 속도
1. 구성 요소
- LXC (Linux Containers)
  - Namespace : 리소스 격리를 위한 주요 기술로 각 컨테이너가 자신만의 파일 시스템, 네트워킹, 사용자 ID 등을 가질 수 있게 한다.
  - Cgroups : 프로세스가 사용하는 메모리와 CPU, 하드디스크, 네트워크 대역폭처럼 리소스의 사용량을 배분하는 등의 관리한다.

### 하이퍼바이저 vs 컨테이너
- 컨테이너는 시작 시간이 짧고 자원 사용이 효율적이기 때문에 애플리케이션을 더 빠르고 경제적으로 호스팅할 수 있게 한다.
- 동일한 커널을 공유하는 컨테이너와 달리 커널을 독립적으로 가지고 있는 가상 머신이 보안 측에서 더 뛰어날 수 있다. 
- 컨테이너는 호스트 OS 와 다른 종류의 OS 는 실행할 수 없다는 단점이 있다. 

<br>

## 참고
[인프런 - 개발자를 위한 쉬운 도커](https://inf.run/wHHR8) 
